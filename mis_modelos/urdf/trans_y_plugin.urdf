<robot name="mira">
<material name="green">
<color rgba="0 0.8 0 1"/>
</material>
<material name="grey">
<color rgba="0.75 0.75 0.75 1"/>
</material>
<material name="red">
<color rgba="0.0 0 0 1"/>
</material>
<material name="blue">
<color rgba="0 0 0.8 1"/>
</material>
<material name="white">
<color rgba="1.0 1.0 1.0 1"/>
</material>
<material name="black">
<color rgba="0.0 0.0 0.0 1"/>
</material>
<link name="dummy"> </link>
<!--
hago este cambio debido a un mensaje de error que me daba y teniendo en cuento lo que se dice en 
     https://answers.ros.org/question/192817/error-msg-the-root-link_base-has-an-inertia-specified-in-the-urdf-but-kdl/ 
-->
<link name="base_link">
<visual>
<origin rpy="0 0 0" xyz="0 0 0"/>
<geometry>
<cylinder radius="0.04" length="0.09"/>
</geometry>
<material name="green"/>
</visual>
<collision>
<geometry>
<cylinder radius="0.04" length="0.09"/>
</geometry>
<origin rpy="0 0 0" xyz="0 0 0"/>
</collision>
<inertial>
<origin xyz="0 0 0"/>
<mass value="2.4"/>
<inertia ixx="0.019995" ixy="0.0" ixz="0.0" iyy="0.019995" iyz="0.0" izz="0.03675"/>
</inertial>
</link>
<joint name="dummy_joint" type="fixed">
<parent link="dummy"/>
<child link="base_link"/>
</joint>
<link name="base_external_link">
<visual>
<origin rpy="0 0 0" xyz="0 0 0"/>
<geometry>
<cylinder radius="0.06" length="0.09"/>
</geometry>
<material name="green"/>
</visual>
<collision>
<geometry>
<cylinder radius="0.04" length="0.09"/>
</geometry>
<origin rpy="0 0 0" xyz="0 0 0"/>
</collision>
<inertial>
<origin xyz="0 0 0"/>
<mass value="2.4"/>
<inertia ixx="0.019995" ixy="0.0" ixz="0.0" iyy="0.019995" iyz="0.0" izz="0.03675"/>
</inertial>
</link>
<joint name="base_external_joint" type="continuous">
<parent link="base_link"/>
<child link="base_external_link"/>
<origin xyz="0 0 0" rpy="0 0 0"/>
<axis xyz="1 0 0"/>
</joint>
<gazebo reference="base_link">
<mu1>0.3</mu1>
<mu2>0.3</mu2>
</gazebo>
<link name="head_link">
<visual>
<origin rpy="0 0 0" xyz="0 0 0"/>
<geometry>
<sphere radius="0.06"/>
</geometry>
<material name="white"/>
</visual>
<collision>
<geometry>
<sphere radius="0.06"/>
</geometry>
<origin rpy="0 0 0" xyz="0 0 0"/>
</collision>
<inertial>
<origin xyz="0 0 0"/>
<mass value="2.4"/>
<inertia ixx="0.019995" ixy="0.0" ixz="0.0" iyy="0.019995" iyz="0.0" izz="0.03675"/>
</inertial>
</link>
<gazebo reference="head_link">
<mu1>1.0</mu1>
<mu2>1.0</mu2>
<kp>1000000.0</kp>
<kd>100.0</kd>
<minDepth>0.001</minDepth>
<maxVel>1.0</maxVel>
</gazebo>
<joint name="base_head_joint" type="continuous">
<parent link="base_link"/>
<child link="head_link"/>
<origin xyz="0 0 0.105" rpy="0 0 0"/>
<axis xyz="0 0 1"/>
</joint>
<!--
 Ahora le voy a poner ojos al robot para poder distinguir con claridad la posicion de la cabeza 
-->
<link name="left_eye_link">
<visual>
<origin rpy="0 0 0" xyz="0 0 0"/>
<geometry>
<cylinder radius="0.005" length="0.005"/>
</geometry>
<material name="black"/>
</visual>
</link>
<gazebo reference="left_eye_link">
<material>Gazebo/Blue</material>
</gazebo>
<joint name="left_eye_joint" type="fixed">
<parent link="head_link"/>
<child link="left_eye_link"/>
<origin xyz="0.0095 0.057 0.0085" rpy="-1.5708 0 0"/>
</joint>
<link name="right_eye_link">
<visual>
<origin rpy="0 0 0" xyz="0 0 0"/>
<geometry>
<cylinder radius="0.005" length="0.005"/>
</geometry>
<material name="black"/>
</visual>
</link>
<gazebo reference="right_eye_link">
<material>Gazebo/Blue</material>
</gazebo>
<joint name="right_eye_joint" type="fixed">
<parent link="head_link"/>
<child link="right_eye_link"/>
<origin xyz="-0.0095 0.057 0.0085" rpy="-1.5708 0 0"/>
</joint>
<!--gazebo -->
<!--
 plugin name="object_controller" filename="libgazebo_ros_planar_move.so" 
-->
<!--commandTopic>cmd_vel</commandTopic-->
<!--odometryTopic>odom</odometryTopic-->
<!--odometryFrame>odom</odometryFrame-->
<!-- odometryRate>20.0</odometryRate-->
<!--robotBaseFrame>head_link</robotBaseFrame-->
<!--/plugin-->
<!--/gazebo-->
     <gazebo>
          <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
               <robotNamespace>/modelo_roberto</robotNamespace>
               <!--La linea que pongo a continuacion la introduzco pues me da un error si no lo hago-->
               <legacyModeNS>true</legacyModeNS>
          </plugin>
     </gazebo>

     <transmission name="tran1">
          <type>transmission_interface/SimpleTransmission</type>
          <joint name="base_head_joint">
               <!--hardwareInterface>EffortJointInterface</hardwareInterface (esta linea la actualice debido a warning que daba)-->
               <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
          </joint>

          <actuator name="motor_cabeza">
               <!--hardwareInterface>EffortJointInterface</hardwareInterface-->
               <mechanicalReduction>1</mechanicalReduction>
          </actuator>
     </transmission>
</robot>